\p
ابتدا حالات تعداد مختلف ممکن کتاب‌ها در قفسه‌ها
($n$)
را می‌شماریم:
$$x_1+x_2+x_3+x_4=24;\: x_i\geq 1;\: 1\leq i\leq 4$$

$$
\left\{
    \begin{array}{rl}
    x_1 & x_1\geq 1\\
    x_2 & x_2\geq 1\\
    x_3 & x_3\geq 1\\
    x_4 & x_4\geq 1
\end{array} \right.  
\mathrel{\overset{\makebox[0pt]{\text{\normalfont  متغیر تغییر }}}{ \quad \Longrightarrow \quad}} \left\{
    \begin{array}{rl}
    y_1=x_1-1 & y_1\geq 0\\
    y_2=x_2-1 & y_2\geq 0\\
    y_3=x_3-1 & y_3\geq 0\\
    y_4=x_4-1 & y_4\geq 0
\end{array} \right.
$$

$$\rightarrow y_1+y_2+y_3+y_4=20; y_i\geq 0;\: 1\leq i\leq 4$$
$$\rightarrow n = {20+4-1 \choose 4-1} = {23 \choose 3}$$
حال پس از مشخص شدن تعداد جایگاه‌ها در هر قفسه و با توجه به متمایز بودن کتاب‌ها برای هر حالت تعداد کتاب‌ها در قفسه‌ها به 
$24!$
حالت می‌توانیم کتاب‌ها را بچینیم.
پس تعداد کل حالات برابر است با:
$${23 \choose 3} \times 24!$$
